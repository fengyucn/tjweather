# å¤©æœºæ°”è±¡APIå·¥å…·é›†

åŸºäºå¤©æœºæ°”è±¡APIçš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼Œæä¾›CLIå‘½ä»¤è¡Œå·¥å…·å’ŒMCPåè®®æœåŠ¡å™¨ï¼Œæ”¯æŒJSONå’ŒNetCDFæ ¼å¼çš„æ°”è±¡æ•°æ®è·å–ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/yourusername/tjweather.git
cd tjweather

# è¿è¡Œå®‰è£…è„šæœ¬
./install.sh
```

### åŸºæœ¬ä½¿ç”¨

```bash
# åˆå§‹åŒ–é…ç½®
tjweather init

# æŸ¥è¯¢å¤©æ°”æ•°æ®
tjweather query -l "116.23128,40.22077" -f t2m -d 3

# ä¸‹è½½NetCDFæ–‡ä»¶
tjweather download -l "116.23128,40.22077" -f t2m -d 3 -o weather.nc
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
tjweather/
â”œâ”€â”€ docs/                     # ğŸ“š æ–‡æ¡£ä¸­å¿ƒ
â”‚   â”œâ”€â”€ README.md             # é¡¹ç›®ä¸»æ–‡æ¡£ (æœ¬æ–‡ä»¶)
â”‚   â”œâ”€â”€ index.md              # æ–‡æ¡£å¯¼èˆªä¸­å¿ƒ
â”‚   â”œâ”€â”€ QUICK_START.md        # 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹
â”‚   â”œâ”€â”€ api/                  # API æ–‡æ¡£
â”‚   â”‚   â””â”€â”€ api_readme        # å¤©æœºæ°”è±¡APIæ–‡æ¡£
â”‚   â”œâ”€â”€ user-guide/           # ç”¨æˆ·æŒ‡å—
â”‚   â”‚   â”œâ”€â”€ å¤šè¦ç´ æŸ¥è¯¢æŒ‡å—.md  # å¤šè¦ç´ æŸ¥è¯¢è¯´æ˜
â”‚   â”‚   â””â”€â”€ NetCDFæ•°æ®ä¸‹è½½æŒ‡å—.md # NetCDFä¸‹è½½è¯´æ˜
â”‚   â”œâ”€â”€ development/          # å¼€å‘æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ å‘½ä»¤æ ¼å¼é‡æ„æŠ¥å‘Š.md # CLIæ¶æ„æ¼”è¿›
â”‚   â”‚   â””â”€â”€ CLIå·¥å…·è°ƒè¯•æŠ¥å‘Š.md   # åŠŸèƒ½æµ‹è¯•æŠ¥å‘Š
â”‚   â”œâ”€â”€ deployment/           # éƒ¨ç½²æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ GITHUB.md         # GitHubè®¾ç½®æŒ‡å—
â”‚   â”‚   â””â”€â”€ ä»“åº“åˆå§‹åŒ–æŠ¥å‘Š.md   # é¡¹ç›®ç»“æ„è®°å½•
â”‚   â”œâ”€â”€ INSTALL.md            # å®‰è£…æŒ‡å—
â”‚   â””â”€â”€ LICENSE               # MITè®¸å¯è¯
â”œâ”€â”€ tjweather-cli/            # ğŸ”§ CLI å‘½ä»¤è¡Œå·¥å…·
â”‚   â”œâ”€â”€ src/                  # TypeScript æºç 
â”‚   â”œâ”€â”€ dist/                 # ç¼–è¯‘è¾“å‡º
â”‚   â”œâ”€â”€ package.json          # åŒ…é…ç½®
â”‚   â”œâ”€â”€ install.sh            # ğŸ“¦ å®‰è£…è„šæœ¬
â”‚   â”œâ”€â”€ uninstall.sh          # ğŸ—‘ï¸ å¸è½½è„šæœ¬
â”‚   â””â”€â”€ README.md             # CLIä½¿ç”¨æ–‡æ¡£
â”œâ”€â”€ tjweather-mcp/            # ğŸ”Œ MCP åè®®æœåŠ¡å™¨
â”‚   â”œâ”€â”€ src/                  # TypeScript æºç 
â”‚   â”œâ”€â”€ dist/                 # ç¼–è¯‘è¾“å‡º
â”‚   â”œâ”€â”€ package.json          # åŒ…é…ç½®
â”‚   â””â”€â”€ README.md             # MCPä½¿ç”¨æ–‡æ¡£
â”œâ”€â”€ .env.example              # ğŸ”‘ é…ç½®æ¨¡æ¿
â”œâ”€â”€ .gitignore                # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ .gitattributes            # Git å±æ€§é…ç½®
â””â”€â”€ README.md                 # é¡¹ç›®ä¸»æ–‡æ¡£ (æœ¬æ–‡ä»¶)
```

## ğŸ“š æ–‡æ¡£ä¸­å¿ƒ

### ğŸš€ å¿«é€Ÿå¼€å§‹
- [âš¡ 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹](docs/QUICK_START.md) - ç«‹å³å¼€å§‹ä½¿ç”¨
- [ğŸ“– æ–‡æ¡£å¯¼èˆªä¸­å¿ƒ](docs/index.md) - å®Œæ•´æ–‡æ¡£ç›®å½•

### ğŸ“– [ç”¨æˆ·æŒ‡å—](docs/user-guide/)
- [å¤šè¦ç´ æŸ¥è¯¢æŒ‡å—](docs/user-guide/å¤šè¦ç´ æŸ¥è¯¢æŒ‡å—.md) - ä¸€æ¬¡è·å–å¤šä¸ªæ°”è±¡è¦ç´ 
- [NetCDFæ•°æ®ä¸‹è½½æŒ‡å—](docs/user-guide/NetCDFæ•°æ®ä¸‹è½½æŒ‡å—.md) - ä¸‹è½½ç§‘å­¦æ•°æ®æ ¼å¼

### ğŸ› ï¸ [å¼€å‘æ–‡æ¡£](docs/development/)
- [å‘½ä»¤æ ¼å¼é‡æ„æŠ¥å‘Š](docs/development/å‘½ä»¤æ ¼å¼é‡æ„æŠ¥å‘Š.md) - CLIæ¶æ„æ¼”è¿›
- [CLIå·¥å…·è°ƒè¯•æŠ¥å‘Š](docs/development/CLIå·¥å…·è°ƒè¯•æŠ¥å‘Š.md) - åŠŸèƒ½æµ‹è¯•æŠ¥å‘Š

### ğŸš€ [éƒ¨ç½²æ–‡æ¡£](docs/deployment/)
- [GitHubè®¾ç½®æŒ‡å—](docs/deployment/GITHUB.md) - ä»“åº“é…ç½®å’Œå‘å¸ƒ
- [ä»“åº“åˆå§‹åŒ–æŠ¥å‘Š](docs/deployment/ä»“åº“åˆå§‹åŒ–æŠ¥å‘Š.md) - é¡¹ç›®ç»“æ„è®°å½•

### ğŸ”Œ [APIæ–‡æ¡£](docs/api/)
- [å¤©æœºæ°”è±¡APIæ–‡æ¡£](docs/api/api_readme) - å®Œæ•´APIæ¥å£è¯´æ˜

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### CLIå·¥å…· (`tjweather`)

- **å¤©æ°”æŸ¥è¯¢**: æ”¯æŒè¡¨æ ¼ã€JSONã€CSVæ ¼å¼è¾“å‡º
- **NetCDFä¸‹è½½**: ç§‘å­¦æ•°æ®æ ¼å¼ï¼Œæ”¯æŒå¤šè¦ç´ 
- **å¤šè¦ç´ æŸ¥è¯¢**: ä¸€æ¬¡è¯·æ±‚è·å–å¤šä¸ªæ°”è±¡è¦ç´ 
- **å…¨å±€é…ç½®**: å¤šå±‚çº§é…ç½®ç®¡ç†ç³»ç»Ÿ
- **é”™è¯¯å¤„ç†**: å‹å¥½çš„é”™è¯¯æç¤ºå’Œå‚æ•°éªŒè¯

### MCPæœåŠ¡å™¨ (`tjweather-mcp`)

- **æ ‡å‡†åè®®**: åŸºäºModel Context Protocol
- **AIé›†æˆ**: æ”¯æŒClaude Codeç­‰AIå·¥å…·
- **å·¥å…·é›†**: weather_queryã€weather_fields_infoç­‰
- **é…ç½®å…±äº«**: ä¸CLIå·¥å…·ç»Ÿä¸€çš„é…ç½®ç®¡ç†

### æ ¸å¿ƒç‰¹æ€§

- âœ… **160+æ°”è±¡è¦ç´ **: é£é€Ÿã€æ¸©åº¦ã€æ¹¿åº¦ã€æ°”å‹ç­‰
- âœ… **å…¨çƒè¦†ç›–**: æ”¯æŒå…¨çƒä»»æ„ç»çº¬åº¦æŸ¥è¯¢
- âœ… **é«˜åˆ†è¾¨ç‡**: 15åˆ†é’Ÿå’Œ1å°æ—¶æ—¶é—´åˆ†è¾¨ç‡
- âœ… **çµæ´»é¢„æŠ¥**: æ”¯æŒ45å¤©å†…é¢„æŠ¥æ•°æ®
- âœ… **å¤šæ ¼å¼è¾“å‡º**: JSONã€è¡¨æ ¼ã€CSVã€NetCDF

## ğŸ› ï¸ å®‰è£…å’Œéƒ¨ç½²

### æ–¹æ³•1: ä½¿ç”¨å®‰è£…è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
./install.sh
```

### æ–¹æ³•2: æ‰‹åŠ¨å®‰è£…

```bash
# CLIå·¥å…·
cd tjweather-cli
npm install
npm run build
npm link

# MCPæœåŠ¡å™¨
cd ../tjweather-mcp
npm install
npm run build
```

### æ–¹æ³•3: å…¨å±€å®‰è£…

```bash
npm install -g ./tjweather-cli
npm install -g ./tjweather-mcp
```

## ğŸ”§ é…ç½®

### åˆå§‹åŒ–é…ç½®

```bash
tjweather init
```

### é…ç½®æ–‡ä»¶ä½ç½®

1. **å½“å‰ç›®å½•**: `./.env`
2. **ç”¨æˆ·é…ç½®**: `~/.config/tjweather/.env`
3. **ç¯å¢ƒå˜é‡**: ç³»ç»Ÿç¯å¢ƒå˜é‡

### é…ç½®æ ¼å¼

```env
# å¤©æœºæ°”è±¡APIé…ç½®
API_KEY=YOUR_API_KEY_HERE
NC_ENDPOINT=https://api.tjweather.com/nc/beta
JSON_ENDPOINT=https://api.tjweather.com/beta
```

## ğŸŒŸ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬æŸ¥è¯¢

```bash
# æŸ¥è¯¢æ¸©åº¦
tjweather query -l "116.23128,40.22077" -f t2m -d 3

# å¤šè¦ç´ æŸ¥è¯¢
tjweather query -l "116.23128,40.22077" -f "t2m,rh2m" -d 7

# é«˜åˆ†è¾¨ç‡é¢„æŠ¥
tjweather query -l "116.23128,40.22077" -f t2m -d 0 -h 24 -r 15min
```

### æ•°æ®ä¸‹è½½

```bash
# ä¸‹è½½NetCDFæ–‡ä»¶
tjweather download -l "116.23128,40.22077" -f t2m -d 7 -o weather.nc

# å¤šè¦ç´ é«˜åˆ†è¾¨ç‡ä¸‹è½½
tjweather download -l "116.23128,40.22077" -f "t2m,rh2m,tp" -d 0 -h 24 -r 15min
```

### é…ç½®ç®¡ç†

```bash
# æŸ¥çœ‹é…ç½®
tjweather config

# æ˜¾ç¤ºAPIå¯†é’¥
tjweather config --show-secret

# è¯¦ç»†æ¨¡å¼
tjweather --verbose query -l "116.23128,40.22077" -f t2m
```

## ğŸ”Œ MCPé›†æˆ

### é…ç½®MCPæœåŠ¡å™¨

åœ¨Claude Codeä¸­æ·»åŠ ï¼š

```json
{
  "mcpServers": {
    "tjweather": {
      "command": "/path/to/tjweather-mcp/dist/index.js"
    }
  }
}
```

### å¯ç”¨å·¥å…·

- `weather_query` - æŸ¥è¯¢å¤©æ°”æ•°æ®
- `weather_fields_info` - è·å–æ°”è±¡è¦ç´ ä¿¡æ¯

## ğŸŒ æ”¯æŒçš„æ°”è±¡è¦ç´ 

### å¸¸ç”¨è¦ç´ 
- `t2m`: 2ç±³æ¸©åº¦ (Â°C) âœ…
- `rh2m`: 2ç±³ç›¸å¯¹æ¹¿åº¦ (%) âœ…
- `ws100m`: 100ç±³é£é€Ÿ (m/s) âš ï¸ éœ€è¦è®¢é˜…
- `ssrd`: è¾ç…§åº¦ (W/ã¡) âš ï¸ éœ€è¦è®¢é˜…

### æ›´å¤šè¦ç´ 
- 160+ æ°”è±¡è¦ç´ æ”¯æŒ
- å…¨çƒå’Œä¸­å›½ç‰¹æœ‰è¦ç´ 
- å¤šé«˜åº¦å±‚æ•°æ®
- é™æ°´å’Œäº‘é‡ä¿¡æ¯

## ğŸ“¦ æŠ€æœ¯æ ˆ

- **è¯­è¨€**: TypeScript + Node.js
- **CLIæ¡†æ¶**: Commander.js
- **HTTPå®¢æˆ·ç«¯**: Axios
- **MCPåè®®**: @modelcontextprotocol/sdk
- **é…ç½®ç®¡ç†**: dotenv
- **è¾“å‡ºæ ¼å¼**: å½©è‰²è¡¨æ ¼ã€JSONã€CSVã€NetCDF

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å¼€å‘ç¯å¢ƒ

```bash
# å®‰è£…ä¾èµ–
cd tjweather-cli && npm install
cd ../tjweather-mcp && npm install

# å¼€å‘æ¨¡å¼
npm run dev

# æ„å»º
npm run build
```

### ä»£ç è§„èŒƒ

- TypeScriptä¸¥æ ¼æ¨¡å¼
- ESLintä»£ç æ£€æŸ¥
- è¯­ä¹‰åŒ–æäº¤ä¿¡æ¯
- å®Œæ•´çš„æ–‡æ¡£æ›´æ–°

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT è®¸å¯è¯](docs/LICENSE)ã€‚

## ğŸ†˜ æ”¯æŒ

- ğŸ“§ é‚®ç®±: popfrog@gmail.com
- ğŸ› é—®é¢˜åé¦ˆ: GitHub Issues
- ğŸ“– æ–‡æ¡£: [docs/](./docs/)
- ğŸ’¬ è®¨è®º: GitHub Discussions

---

**å¤©æœºæ°”è±¡APIå·¥å…·é›†** - è®©æ°”è±¡æ•°æ®è·å–å˜å¾—ç®€å•é«˜æ•ˆï¼ ğŸŒ¤ï¸