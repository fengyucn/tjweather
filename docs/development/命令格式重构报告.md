# CLIå‘½ä»¤æ ¼å¼é‡æ„æŠ¥å‘Š

## âœ… é‡æ„å®ŒæˆçŠ¶æ€

### ğŸ¯ é‡æ„ç›®æ ‡
å°†CLIå·¥å…·çš„å‘½ä»¤æ ¼å¼ä»åŸæ¥çš„ `tjweather-cli [command] [options]` é‡æ„ä¸ºæ›´æ ‡å‡†çš„ `tjweather [global-options] subcommand [subcommand-options]` æ ¼å¼ã€‚

### ğŸ”§ é‡æ„å†…å®¹

#### 1. å‘½ä»¤ç»“æ„å˜æ›´

**é‡æ„å‰ï¼š**
```bash
./dist/index.js query [options]
./dist/index.js init [options]
./dist/index.js config [options]
```

**é‡æ„åï¼š**
```bash
tjweather [global-options] query [options]
tjweather [global-options] init [options]
tjweather [global-options] config [options]
tjweather [global-options] version
```

#### 2. æ–°å¢å…¨å±€é€‰é¡¹

- `-v, --verbose`: è¯¦ç»†è¾“å‡ºæ¨¡å¼ï¼Œæ‰€æœ‰å­å‘½ä»¤éƒ½ä¼šç»§æ‰¿
- `-c, --config <path>`: æŒ‡å®šè‡ªå®šä¹‰é…ç½®æ–‡ä»¶è·¯å¾„
- `--no-color`: ç¦ç”¨å½©è‰²è¾“å‡º
- `-h, --help`: æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯

#### 3. å­å‘½ä»¤å®Œå–„

**æ–°å¢å­å‘½ä»¤ï¼š**
- `version`: æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯

**æ”¹è¿›çš„å­å‘½ä»¤ï¼š**
- `query`: æŸ¥è¯¢å¤©æ°”æ•°æ®
- `init`: åˆå§‹åŒ–é…ç½®æ–‡ä»¶ï¼ˆæ–°å¢ `-f, --force` é€‰é¡¹ï¼‰
- `config`: æ˜¾ç¤ºå½“å‰é…ç½®

#### 4. ä»£ç ç»“æ„ä¼˜åŒ–

- å°†æ‰€æœ‰å‘½ä»¤é›†æˆåˆ° `src/index.ts` ä¸­
- ç§»é™¤ `src/commands/query.ts` æ–‡ä»¶
- ç»Ÿä¸€é”™è¯¯å¤„ç†å’Œç”¨æˆ·ä½“éªŒ
- æ”¹è¿›è¾“å‡ºæ ¼å¼å’ŒçŠ¶æ€ä¿¡æ¯

### ğŸ“‹ æ–°å‘½ä»¤æ ¼å¼è¯¦ç»†è¯´æ˜

#### å…¨å±€é€‰é¡¹
```bash
tjweather [å…¨å±€é€‰é¡¹] <å­å‘½ä»¤> [å­å‘½ä»¤é€‰é¡¹]
```

**å…¨å±€é€‰é¡¹ï¼š**
- `-v, --verbose`: è¯¦ç»†è¾“å‡ºï¼Œæ˜¾ç¤ºæ‰§è¡Œè¿‡ç¨‹
- `-c, --config <path>`: æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„
- `--no-color`: ç¦ç”¨å½©è‰²è¾“å‡º

#### å­å‘½ä»¤

**1. query - æŸ¥è¯¢å¤©æ°”æ•°æ®**
```bash
tjweather query -l "116.23128,40.22077" -f t2m -d 3
```

**2. init - åˆå§‹åŒ–é…ç½®**
```bash
tjweather init
tjweather --verbose init
```

**3. config - æ˜¾ç¤ºé…ç½®**
```bash
tjweather config
tjweather config --show-secret
```

**4. version - æ˜¾ç¤ºç‰ˆæœ¬**
```bash
tjweather version
```

### âœ… æµ‹è¯•ç»“æœ

#### 1. åŠŸèƒ½å®Œæ•´æ€§æµ‹è¯•
- âœ… æ‰€æœ‰åŸæœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- âœ… å…¨å±€é€‰é¡¹æ­£ç¡®ä¼ é€’ç»™å­å‘½ä»¤
- âœ… å­å‘½ä»¤é€‰é¡¹ç‹¬ç«‹å·¥ä½œ
- âœ… é”™è¯¯å¤„ç†æœºåˆ¶å®Œå–„

#### 2. å‘½ä»¤æ ¼å¼æµ‹è¯•
```bash
# åŸºæœ¬å‘½ä»¤æµ‹è¯•
âœ… ./dist/index.js --help
âœ… ./dist/index.js query --help
âœ… ./dist/index.js version

# å…¨å±€é€‰é¡¹æµ‹è¯•
âœ… ./dist/index.js --verbose query -l "116.23128,40.22077" -f t2m
âœ… ./dist/index.js --verbose config
âœ… ./dist/index.js --verbose init

# è¾“å‡ºæ ¼å¼æµ‹è¯•
âœ… ./dist/index.js query -l "116.23128,40.22077" --format json
âœ… ./dist/index.js query -l "116.23128,40.22077" --format csv -o test.csv

# é”™è¯¯å¤„ç†æµ‹è¯•
âœ… ./dist/index.js query -l "invalid" -f t2m
âœ… ./dist/index.js unknown-command
```

#### 3. ç”¨æˆ·ä½“éªŒæµ‹è¯•
- âœ… å¸®åŠ©ä¿¡æ¯æ¸…æ™°æ˜“æ‡‚
- âœ… é”™è¯¯æç¤ºå‹å¥½å‡†ç¡®
- âœ… è¯¦ç»†æ¨¡å¼ä¿¡æ¯ä¸°å¯Œ
- âœ… å½©è‰²è¾“å‡ºç¾è§‚

### ğŸš€ ä½¿ç”¨ç¤ºä¾‹å¯¹æ¯”

#### é‡æ„å‰çš„ä½¿ç”¨æ–¹å¼
```bash
# æŸ¥è¯¢å¤©æ°”
./dist/index.js query -l "116.23128,40.22077" -f t2m -v

# æŸ¥çœ‹é…ç½®
./dist/index.js config -s

# åˆå§‹åŒ–é…ç½®
./dist/index.js init
```

#### é‡æ„åçš„ä½¿ç”¨æ–¹å¼
```bash
# æŸ¥è¯¢å¤©æ°”
tjweather --verbose query -l "116.23128,40.22077" -f t2m

# æŸ¥çœ‹é…ç½®
tjweather config --show-secret

# åˆå§‹åŒ–é…ç½®
tjweather init

# æŸ¥çœ‹ç‰ˆæœ¬
tjweather version

# å…¨å±€è¯¦ç»†æ¨¡å¼
tjweather --verbose query -l "116.23128,40.22077" -f t2m
tjweather --verbose config
tjweather --verbose init
```

### ğŸ“ˆ æ”¹è¿›æ•ˆæœ

#### 1. å‘½ä»¤æ ‡å‡†åŒ–
- éµå¾ªç°ä»£CLIå·¥å…·çš„æ ‡å‡†æ ¼å¼
- å…¨å±€é€‰é¡¹å’Œå­å‘½ä»¤é€‰é¡¹åˆ†ç¦»æ¸…æ™°
- å‘½ä»¤ç»“æ„æ›´åŠ ç›´è§‚

#### 2. ç”¨æˆ·ä½“éªŒæå‡
- å…¨å±€ `--verbose` é€‰é¡¹é€‚ç”¨äºæ‰€æœ‰å­å‘½ä»¤
- æ›´å‹å¥½çš„å¸®åŠ©ä¿¡æ¯å’Œé”™è¯¯æç¤º
- ç»Ÿä¸€çš„è¾“å‡ºæ ¼å¼å’ŒçŠ¶æ€æŒ‡ç¤º

#### 3. åŠŸèƒ½æ‰©å±•æ€§
- æ›´å®¹æ˜“æ·»åŠ æ–°çš„å­å‘½ä»¤
- å…¨å±€é€‰é¡¹å¯ä»¥åº”ç”¨åˆ°æ‰€æœ‰åŠŸèƒ½
- æ¨¡å—åŒ–çš„å‘½ä»¤ç»“æ„ä¾¿äºç»´æŠ¤

#### 4. ä»£ç è´¨é‡
- ç»Ÿä¸€çš„ä»£ç ç»“æ„å’Œé”™è¯¯å¤„ç†
- å‡å°‘ä»£ç é‡å¤
- æ›´å¥½çš„TypeScriptç±»å‹æ”¯æŒ

### ğŸ‰ æ€»ç»“

**é‡æ„çŠ¶æ€ï¼šâœ… å®Œå…¨æˆåŠŸ**

CLIå·¥å…·çš„å‘½ä»¤æ ¼å¼é‡æ„å·²ç»å®Œæˆï¼Œæ–°çš„æ ¼å¼æ›´åŠ æ ‡å‡†å’Œç”¨æˆ·å‹å¥½ï¼š

- âœ… å‘½ä»¤æ ¼å¼æ ‡å‡†åŒ–ï¼š`tjweather [options] subcommand xxx`
- âœ… å…¨å±€é€‰é¡¹æ”¯æŒï¼š`--verbose`ã€`--config`ã€`--no-color`
- âœ… å®Œæ•´çš„å­å‘½ä»¤ï¼š`query`ã€`init`ã€`config`ã€`version`
- âœ… å‘åå…¼å®¹ï¼šæ‰€æœ‰åŸæœ‰åŠŸèƒ½éƒ½æ­£å¸¸å·¥ä½œ
- âœ… ç”¨æˆ·ä½“éªŒï¼šæ›´ç›´è§‚çš„å‘½ä»¤ç»“æ„å’Œæ›´å¥½çš„é”™è¯¯æç¤º

å·¥å…·ç°åœ¨å…·æœ‰ç°ä»£CLIå·¥å…·çš„æ ‡å‡†æ ¼å¼ï¼Œç”¨æˆ·ä½“éªŒæ˜¾è‘—æå‡ï¼